<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qwingo üé≤</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Inter Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #020617; /* Slate-950 equivalent */
      color: #e2e8f0; /* Slate-200 equivalent */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 1rem;
      background-image: radial-gradient(circle at 50% 0%, #1e293b 0%, #020617 70%);
      background-attachment: fixed;
      overflow-y: auto;
    }
    .game-container {
        background: rgba(15, 23, 42, 0.7); /* Slate-900 with transparency */
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1.5rem; /* 24px */
        padding: 2rem;
        max-width: 800px;
        width: 100%;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.05);
    }
    header {
        text-align: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    h1 {
        font-size: 2.5rem; /* text-4xl */
        font-weight: 900; /* font-black */
        color: #f59e0b; /* Amber-500 */
        text-shadow: 0 0 15px rgba(245, 158, 11, 0.5);
        margin-bottom: 0.5rem;
        letter-spacing: -0.05em; /* tracking-tighter */
        line-height: 1;
    }
    .board-grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(50px, 1fr)); /* 5 columns */
      gap: 0.25rem; /* gap-1 */
      margin: 1.5rem auto; /* my-6 mx-auto */
      max-width: 400px; /* Adjust as needed */
    }
    .col-header {
        height: 40px;
        background-color: #3b82f6; /* Blue-500 */
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 700;
        border-radius: 0.5rem;
        font-size: 1.25rem;
    }
    .cell {
      width: 100%; /* Fill grid space */
      height: 40px;
      background: #1e293b; /* Slate-800 */
      border: 1px solid #334155; /* Slate-700 */
      border-radius: 0.375rem; /* rounded-md */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.1s ease-in-out;
      user-select: none;
    }
    .cell:hover:not(.filled):not(.disabled):not(.error) {
      background: #334155; /* Slate-700 on hover */
      border-color: #64748b; /* Slate-500 */
    }
    .cell.filled {
      background: #15803d; /* Emerald-700 */
      color: white;
      border-color: #16a34a; /* Emerald-600 */
      cursor: default;
    }
    .cell.selected {
        background: #3b82f6; /* Blue-500 */
        border-color: #2563eb; /* Blue-600 */
    }
    .cell.disabled {
        background: #475569; /* Slate-600 */
        color: #94a3b8; /* Slate-400 */
        cursor: not-allowed;
        opacity: 0.7;
    }
    .cell.error {
        background: #ef4444; /* Red-500 */
        border-color: #dc2626; /* Red-600 */
        animation: shake 0.3s;
    }
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        20%, 60% { transform: translateX(-5px); }
        40%, 80% { transform: translateX(5px); }
    }

    #controls {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.75rem; /* gap-3 */
        margin-top: 1.5rem; /* mt-6 */
    }
    input[type="number"] {
        padding: 0.75rem 1rem;
        border-radius: 0.75rem;
        border: 1px solid #475569;
        background-color: #1e293b;
        color: white;
        font-size: 1rem;
        outline: none;
        width: 120px;
        text-align: center;
        appearance: textfield; /* Remove number input arrows */
    }
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .btn {
        padding: 0.75rem 1.5rem;
        border-radius: 0.75rem; /* 12px */
        font-weight: 700; /* font-bold */
        transition: all 0.2s ease-in-out;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        text-transform: uppercase;
        letter-spacing: 0.025em;
        font-size: 0.875rem;
    }
    .btn-primary {
        background-color: #3b82f6; /* Blue-500 */
        color: white;
        border: none;
    }
    .btn-primary:hover:not(:disabled) {
        background-color: #2563eb; /* Blue-600 */
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(59, 130, 246, 0.3);
    }
    .btn-warning {
        background-color: #f59e0b; /* Amber-500 */
        color: white;
        border: none;
    }
    .btn-warning:hover:not(:disabled) {
        background-color: #d97706; /* Amber-600 */
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(245, 158, 11, 0.3);
    }
    .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    #status {
        margin-top: 1rem;
        font-size: 1rem;
        font-weight: 600;
        color: #94a3b8;
    }
    #rollResult {
        font-size: 1.5rem;
        font-weight: 800;
        color: #10b981; /* Emerald-500 */
        margin-top: 1rem;
        text-align: center;
    }
    #turnsCount {
        margin-top: 0.5rem;
        font-size: 0.9rem;
        color: #64748b;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <header>
        <h1>Qwingo üé≤</h1>
        <p id="status" class="text-white text-lg font-bold">Enter a number (1-100) and roll the die!</p>
    </header>

    <div id="controls">
      <input type="number" id="numberInput" placeholder="1‚Äì100" min="1" max="100">
      <button id="rollDieBtn" class="btn btn-primary" onclick="rollDie()">Roll Die</button>
      <button id="newGameBtn" class="btn btn-warning" onclick="newGame()">New Game</button>
    </div>

    <p id="rollResult" class="hidden">üé≤ Rolled: <span id="rolledColumnIcon"></span></p>
    <p id="turnsCount" class="hidden">Turns: <span id="currentTurns">0</span></p>

    <div class="board-grid" id="boardGrid">
        <!-- Column Headers -->
        <div class="col-header">üçé</div>
        <div class="col-header">üçå</div>
        <div class="col-header">üçí</div>
        <div class="col-header">üçá</div>
        <div class="col-header">üçç</div>
        <!-- Cells generated by JS -->
    </div>
  </div>

  <script>
    const boardGrid = document.getElementById("boardGrid");
    const statusText = document.getElementById("status");
    const numberInput = document.getElementById("numberInput");
    const rollDieBtn = document.getElementById("rollDieBtn");
    const rollResultP = document.getElementById("rollResult");
    const rolledColumnIconSpan = document.getElementById("rolledColumnIcon");
    const turnsCountP = document.getElementById("turnsCount");
    const currentTurnsSpan = document.getElementById("currentTurns");

    const COL_COUNT = 5;
    const ROW_COUNT = 10; // 10 rows for numbers + 2 for 10,20,30,40,50 initial placement
    const ICONS = ['üçé', 'üçå', 'üçí', 'üçá', 'üçç'];
    const LIGHTNING_ICON = '‚ö°';

    let board = []; // 2D array representing the board
    let chosenNumber = null;
    let rolledColumn = null; // 0-4 for column index, -1 for wild
    let turns = 0;
    let gameOver = false;

    function newGame() {
        board = Array(ROW_COUNT).fill(null).map(() => Array(COL_COUNT).fill(null));
        chosenNumber = null;
        rolledColumn = null;
        turns = 0;
        gameOver = false;
        
        numberInput.value = '';
        numberInput.disabled = false;
        rollDieBtn.disabled = false;
        statusText.textContent = "Enter a number (1-100) and roll the die!";
        rollResultP.classList.add('hidden');
        turnsCountP.classList.add('hidden');
        currentTurnsSpan.textContent = '0';

        renderBoard();
        setupInitialNumbers();
    }

    function renderBoard() {
        // Clear existing cells, but keep column headers
        while (boardGrid.children.length > COL_COUNT) {
            boardGrid.removeChild(boardGrid.lastChild);
        }

        for (let r = 0; r < ROW_COUNT; r++) {
            for (let c = 0; c < COL_COUNT; c++) {
                const cell = document.createElement("div");
                cell.className = "cell";
                cell.dataset.row = r;
                cell.dataset.col = c;
                cell.textContent = board[r][c] !== null ? board[r][c] : '';
                
                if (board[r][c] !== null) {
                    cell.classList.add('filled');
                    cell.classList.add('disabled'); // Filled cells can't be clicked
                } else {
                    cell.onclick = () => placeNumber(cell);
                }
                boardGrid.appendChild(cell);
            }
        }
    }

    function setupInitialNumbers() {
        const initialNums = [10, 20, 30, 40, 50];
        const cells = Array.from(boardGrid.children).filter(c => c.classList.contains('cell')); // Get only actual cells
        const availableIndices = Array.from({length: ROW_COUNT * COL_COUNT}, (_,i) => i);

        initialNums.forEach(num => {
            let placed = false;
            while(!placed) {
                const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
                const r = Math.floor(randomIndex / COL_COUNT);
                const c = randomIndex % COL_COUNT;

                // Check if this placement maintains ascending order
                const prevNum = (r > 0 && board[r-1][c] !== null) ? board[r-1][c] : 0;
                const nextNum = (r < ROW_COUNT -1 && board[r+1][c] !== null) ? board[r+1][c] : 101; // Max + 1

                if (num > prevNum && num < nextNum) {
                    board[r][c] = num;
                    cells[randomIndex].textContent = num;
                    cells[randomIndex].classList.add('filled', 'disabled');
                    // Remove used index from available so we don't try to place there again
                    availableIndices.splice(availableIndices.indexOf(randomIndex), 1);
                    placed = true;
                }
            }
        });
        renderBoard(); // Re-render with initial numbers
        statusText.textContent = "Initial numbers placed. Enter a number (1-100) and roll the die!";
    }


    function rollDie() {
      const val = parseInt(numberInput.value);
      if (!val || val < 1 || val > 100) {
        alert("Enter a number between 1 and 100 before rolling.");
        return;
      }
      chosenNumber = val;
      
      const roll = Math.floor(Math.random() * (ICONS.length + 1)); // 0-4 for columns, 5 for wild
      if (roll === ICONS.length) {
          rolledColumn = -1; // Wild
          rolledColumnIconSpan.textContent = LIGHTNING_ICON;
          statusText.textContent = `You called ${chosenNumber}. Rolled Wild ${LIGHTNING_ICON}! Place it in any column.`;
      } else {
          rolledColumn = roll; // Specific column
          rolledColumnIconSpan.textContent = ICONS[rolledColumn];
          statusText.textContent = `You called ${chosenNumber}. Rolled ${ICONS[rolledColumn]}! Place it in column ${rolledColumn + 1}.`;
      }
      
      rollResultP.classList.remove('hidden');
      turnsCountP.classList.remove('hidden');
      
      // Disable controls until number is placed
      numberInput.disabled = true;
      rollDieBtn.disabled = true;

      highlightPlaceableCells();
    }

    function highlightPlaceableCells() {
        const cells = Array.from(boardGrid.children).filter(c => c.classList.contains('cell'));
        cells.forEach(cell => {
            const r = parseInt(cell.dataset.row);
            const c = parseInt(cell.dataset.col);

            let isPlaceable = false;
            if (board[r][c] === null) { // Only empty cells
                if (rolledColumn === -1 || rolledColumn === c) { // Correct column or wild
                    const prevNum = (r > 0 && board[r-1][c] !== null) ? board[r-1][c] : 0;
                    const nextNum = (r < ROW_COUNT -1 && board[r+1][c] !== null) ? board[r+1][c] : 101;
                    if (chosenNumber > prevNum && chosenNumber < nextNum) {
                        isPlaceable = true;
                    }
                }
            }

            if (isPlaceable) {
                cell.classList.add('selected');
            } else {
                cell.classList.add('disabled');
            }
        });
    }

    function clearHighlighting() {
        const cells = Array.from(boardGrid.children).filter(c => c.classList.contains('cell'));
        cells.forEach(cell => {
            cell.classList.remove('selected', 'disabled', 'error');
            if (cell.textContent === '') { // Only make empty cells clickable again
                cell.onclick = () => placeNumber(cell);
            } else {
                cell.onclick = null; // Filled cells not clickable
            }
        });
    }

    function placeNumber(cell) {
        if (gameOver) return;

        const r = parseInt(cell.dataset.row);
        const c = parseInt(cell.dataset.col);

        if (chosenNumber === null) {
            statusText.textContent = "First, enter a number (1-100) and click 'Roll Die'.";
            return;
        }
        if (board[r][c] !== null) {
            statusText.textContent = "This cell is already filled. Choose another.";
            cell.classList.add('error'); // Flash error
            setTimeout(() => cell.classList.remove('error'), 500);
            return;
        }
        if (rolledColumn !== -1 && rolledColumn !== c) {
            statusText.textContent = `You rolled for ${ICONS[rolledColumn]} column. Place the number there or roll again.`;
            cell.classList.add('error'); // Flash error
            setTimeout(() => cell.classList.remove('error'), 500);
            return;
        }

        // Check ascending order
        const prevNum = (r > 0 && board[r-1][c] !== null) ? board[r-1][c] : 0;
        const nextNum = (r < ROW_COUNT -1 && board[r+1][c] !== null) ? board[r+1][c] : 101;
        if (chosenNumber <= prevNum || chosenNumber >= nextNum) {
            statusText.textContent = `Numbers in a column must be in ascending order. ${chosenNumber} cannot be placed here.`;
            cell.classList.add('error'); // Flash error
            setTimeout(() => cell.classList.remove('error'), 500);
            return;
        }

        // Valid placement
        board[r][c] = chosenNumber;
        cell.textContent = chosenNumber;
        cell.classList.add("filled");
        cell.classList.remove("selected"); // Remove highlight
        cell.onclick = null; // No longer clickable

        clearHighlighting(); // Clear all highlights and disabled states
        turns++;
        currentTurnsSpan.textContent = turns;

        if (checkWin(c)) {
            gameOver = true;
            statusText.textContent = `QWINGO! üéâ You filled column ${c + 1} in ${turns} turns! Game Over!`;
            numberInput.disabled = true;
            rollDieBtn.disabled = true;
        } else {
            chosenNumber = null;
            rolledColumn = null;
            numberInput.disabled = false;
            rollDieBtn.disabled = false;
            numberInput.value = '';
            statusText.textContent = "Number placed. Enter a number (1-100) and roll the die!";
        }
    }

    function checkWin(colIndex) {
      // Check if the given column is full
      return board.every(row => row[colIndex] !== null);
    }
    
    // Initial Setup
    newGame();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Logo Map | Core 4 Leagues</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #f8fafc; display: flex; flex-direction: column; min-height: 100vh; }
        #map { flex-grow: 1; min-height: 400px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); }
        .leaflet-container { background-color: #0f172a; }
        .leaflet-marker-icon { background: white; border-radius: 50%; padding: 3px; box-shadow: 0 2px 5px rgba(0,0,0,0.3); transition: transform 0.2s; }
        .leaflet-marker-icon:hover { transform: scale(1.2); z-index: 1000 !important; }
        .leaflet-popup-content-wrapper { background: #1e293b; color: #f8fafc; border-radius: 12px; }
        .leaflet-popup-tip { background: #1e293b; }
    </style>
</head>
<body class="p-4 md:p-8">

    <header class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4 mb-4 shrink-0 w-full">
        <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-emerald-500 rounded-2xl flex items-center justify-center text-slate-900 font-black text-2xl shadow-xl shadow-emerald-500/20">M</div>
            <div>
                <h1 class="text-2xl font-black uppercase tracking-tighter italic">LogoMap</h1>
                <p class="text-[10px] text-emerald-400 font-bold uppercase tracking-widest">Core 4 Leagues â€¢ All Teams</p>
            </div>
        </div>
        
        <div class="flex gap-2 flex-wrap justify-center">
            <button onclick="zoomToAll()" class="px-6 py-2 bg-slate-800 text-white font-bold rounded-full hover:bg-slate-700 transition-all text-xs uppercase shadow-lg">
                Reset View
            </button>
            <button id="filterButton" onclick="toggleLeagueFilter()" class="px-6 py-2 bg-blue-600 text-white font-bold rounded-full hover:bg-blue-500 transition-all text-xs uppercase shadow-lg min-w-[140px]">
                Filter: ALL
            </button>
        </div>
    </header>

    <main class="max-w-7xl mx-auto w-full flex-grow flex flex-col gap-4">
        <div id="map" class="w-full h-full"></div>
    </main>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        let map;
        // Full Roster of Core 4 Teams
        const TEAM_DATA = [
            // --- NFL (32) ---
            { name: "Arizona Cardinals", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/ari.png", lat: 33.5276, lon: -112.2626 },
            { name: "Atlanta Falcons", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/atl.png", lat: 33.7554, lon: -84.4010 },
            { name: "Baltimore Ravens", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/bal.png", lat: 39.2780, lon: -76.6227 },
            { name: "Buffalo Bills", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/buf.png", lat: 42.7738, lon: -78.7870 },
            { name: "Carolina Panthers", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/car.png", lat: 35.2258, lon: -80.8528 },
            { name: "Chicago Bears", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/chi.png", lat: 41.8623, lon: -87.6167 },
            { name: "Cincinnati Bengals", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/cin.png", lat: 39.0955, lon: -84.5161 },
            { name: "Cleveland Browns", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/cle.png", lat: 41.5061, lon: -81.6995 },
            { name: "Dallas Cowboys", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/dal.png", lat: 32.7473, lon: -97.0945 },
            { name: "Denver Broncos", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/den.png", lat: 39.7439, lon: -105.0201 },
            { name: "Detroit Lions", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/det.png", lat: 42.3400, lon: -83.0456 },
            { name: "Green Bay Packers", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/gb.png", lat: 44.5013, lon: -88.0622 },
            { name: "Houston Texans", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/hou.png", lat: 29.6847, lon: -95.4107 },
            { name: "Indianapolis Colts", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/ind.png", lat: 39.7601, lon: -86.1639 },
            { name: "Jacksonville Jaguars", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/jax.png", lat: 30.3239, lon: -81.6373 },
            { name: "Kansas City Chiefs", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/kc.png", lat: 39.0489, lon: -94.4839 },
            { name: "Las Vegas Raiders", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/lv.png", lat: 36.0909, lon: -115.1833 },
            { name: "Los Angeles Chargers", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/lac.png", lat: 33.9535, lon: -118.3392 },
            { name: "Los Angeles Rams", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/lar.png", lat: 33.9535, lon: -118.3392 }, // Shared stadium (SoFi)
            { name: "Miami Dolphins", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/mia.png", lat: 25.9580, lon: -80.2389 },
            { name: "Minnesota Vikings", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/min.png", lat: 44.9735, lon: -93.2575 },
            { name: "New England Patriots", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/ne.png", lat: 42.0909, lon: -71.2643 },
            { name: "New Orleans Saints", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/no.png", lat: 29.9511, lon: -90.0812 },
            { name: "New York Giants", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/nyg.png", lat: 40.8128, lon: -74.0742 },
            { name: "New York Jets", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/nyj.png", lat: 40.8128, lon: -74.0742 }, // Shared stadium (MetLife)
            { name: "Philadelphia Eagles", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/phi.png", lat: 39.9008, lon: -75.1675 },
            { name: "Pittsburgh Steelers", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/pit.png", lat: 40.4468, lon: -80.0158 },
            { name: "San Francisco 49ers", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/sf.png", lat: 37.4032, lon: -121.9697 },
            { name: "Seattle Seahawks", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/sea.png", lat: 47.5952, lon: -122.3316 },
            { name: "Tampa Bay Buccaneers", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/tb.png", lat: 27.9759, lon: -82.5033 },
            { name: "Tennessee Titans", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/ten.png", lat: 36.1665, lon: -86.7713 },
            { name: "Washington Commanders", league: "NFL", logo: "https://a.espncdn.com/i/teamlogos/nfl/500/wsh.png", lat: 38.9076, lon: -76.8645 },

            // --- NBA (30) ---
            { name: "Atlanta Hawks", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/atl.png", lat: 33.7573, lon: -84.3963 },
            { name: "Boston Celtics", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/bos.png", lat: 42.3662, lon: -71.0621 },
            { name: "Brooklyn Nets", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/bkn.png", lat: 40.6826, lon: -73.9754 },
            { name: "Charlotte Hornets", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/cha.png", lat: 35.2251, lon: -80.8392 },
            { name: "Chicago Bulls", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/chi.png", lat: 41.8807, lon: -87.6742 },
            { name: "Cleveland Cavaliers", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/cle.png", lat: 41.4966, lon: -81.6882 },
            { name: "Dallas Mavericks", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/dal.png", lat: 32.7905, lon: -96.8103 },
            { name: "Denver Nuggets", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/den.png", lat: 39.7487, lon: -105.0076 },
            { name: "Detroit Pistons", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/det.png", lat: 42.3411, lon: -83.0553 },
            { name: "Golden State Warriors", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/gs.png", lat: 37.7680, lon: -122.3877 },
            { name: "Houston Rockets", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/hou.png", lat: 29.7508, lon: -95.3621 },
            { name: "Indiana Pacers", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/ind.png", lat: 39.7640, lon: -86.1555 },
            { name: "Los Angeles Clippers", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/lac.png", lat: 33.9453, lon: -118.3415 }, // Intuit Dome
            { name: "Los Angeles Lakers", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/lal.png", lat: 34.0430, lon: -118.2673 },
            { name: "Memphis Grizzlies", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/mem.png", lat: 35.1381, lon: -90.0505 },
            { name: "Miami Heat", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/mia.png", lat: 25.7814, lon: -80.1870 },
            { name: "Milwaukee Bucks", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/mil.png", lat: 43.0451, lon: -87.9174 },
            { name: "Minnesota Timberwolves", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/min.png", lat: 44.9795, lon: -93.2761 },
            { name: "New Orleans Pelicans", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/no.png", lat: 29.9490, lon: -90.0821 },
            { name: "New York Knicks", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/ny.png", lat: 40.7505, lon: -73.9934 },
            { name: "Oklahoma City Thunder", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/okc.png", lat: 35.4634, lon: -97.5151 },
            { name: "Orlando Magic", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/orl.png", lat: 28.5392, lon: -81.3839 },
            { name: "Philadelphia 76ers", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/phi.png", lat: 39.9012, lon: -75.1720 },
            { name: "Phoenix Suns", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/phx.png", lat: 33.4457, lon: -112.0712 },
            { name: "Portland Trail Blazers", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/por.png", lat: 45.5316, lon: -122.6668 },
            { name: "Sacramento Kings", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/sac.png", lat: 38.5802, lon: -121.4997 },
            { name: "San Antonio Spurs", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/sa.png", lat: 29.4270, lon: -98.4375 },
            { name: "Toronto Raptors", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/tor.png", lat: 43.6435, lon: -79.3791 },
            { name: "Utah Jazz", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/uta.png", lat: 40.7683, lon: -111.9011 },
            { name: "Washington Wizards", league: "NBA", logo: "https://a.espncdn.com/i/teamlogos/nba/500/wsh.png", lat: 38.8982, lon: -77.0209 },

            // --- MLB (30) ---
            { name: "Arizona Diamondbacks", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/ari.png", lat: 33.4453, lon: -112.0667 },
            { name: "Atlanta Braves", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/atl.png", lat: 33.8907, lon: -84.4677 },
            { name: "Baltimore Orioles", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/bal.png", lat: 39.2840, lon: -76.6215 },
            { name: "Boston Red Sox", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/bos.png", lat: 42.3467, lon: -71.0972 },
            { name: "Chicago Cubs", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/chc.png", lat: 41.9484, lon: -87.6553 },
            { name: "Chicago White Sox", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/cws.png", lat: 41.8299, lon: -87.6338 },
            { name: "Cincinnati Reds", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/cin.png", lat: 39.0979, lon: -84.5082 },
            { name: "Cleveland Guardians", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/cle.png", lat: 41.4962, lon: -81.6852 },
            { name: "Colorado Rockies", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/col.png", lat: 39.7559, lon: -104.9942 },
            { name: "Detroit Tigers", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/det.png", lat: 42.3390, lon: -83.0485 },
            { name: "Houston Astros", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/hou.png", lat: 29.7573, lon: -95.3555 },
            { name: "Kansas City Royals", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/kc.png", lat: 39.0517, lon: -94.4803 },
            { name: "Los Angeles Angels", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/laa.png", lat: 33.8003, lon: -117.8827 },
            { name: "Los Angeles Dodgers", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/lad.png", lat: 34.0739, lon: -118.2400 },
            { name: "Miami Marlins", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/mia.png", lat: 25.7783, lon: -80.2196 },
            { name: "Milwaukee Brewers", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/mil.png", lat: 43.0296, lon: -87.9712 },
            { name: "Minnesota Twins", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/min.png", lat: 44.9817, lon: -93.2778 },
            { name: "New York Mets", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/nym.png", lat: 40.7571, lon: -73.8458 },
            { name: "New York Yankees", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/nyy.png", lat: 40.8296, lon: -73.9262 },
            { name: "Oakland Athletics", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/oak.png", lat: 38.5804, lon: -121.5097 }, // Sutter Health Park (Sacramento)
            { name: "Philadelphia Phillies", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/phi.png", lat: 39.9061, lon: -75.1665 },
            { name: "Pittsburgh Pirates", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/pit.png", lat: 40.4469, lon: -80.0057 },
            { name: "San Diego Padres", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/sd.png", lat: 32.7077, lon: -117.1570 },
            { name: "San Francisco Giants", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/sf.png", lat: 37.7786, lon: -122.3893 },
            { name: "Seattle Mariners", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/sea.png", lat: 47.5913, lon: -122.3323 },
            { name: "St. Louis Cardinals", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/stl.png", lat: 38.6226, lon: -90.1928 },
            { name: "Tampa Bay Rays", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/tb.png", lat: 27.7682, lon: -82.6534 },
            { name: "Texas Rangers", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/tex.png", lat: 32.7511, lon: -97.0825 },
            { name: "Toronto Blue Jays", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/tor.png", lat: 43.6418, lon: -79.3892 },
            { name: "Washington Nationals", league: "MLB", logo: "https://a.espncdn.com/i/teamlogos/mlb/500/wsh.png", lat: 38.8730, lon: -77.0074 },

            // --- NHL (32) ---
            { name: "Anaheim Ducks", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/ana.png", lat: 33.8078, lon: -117.8765 },
            { name: "Boston Bruins", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/bos.png", lat: 42.3662, lon: -71.0621 },
            { name: "Buffalo Sabres", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/buf.png", lat: 42.8760, lon: -78.8769 },
            { name: "Calgary Flames", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/cgy.png", lat: 51.0374, lon: -114.0519 },
            { name: "Carolina Hurricanes", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/car.png", lat: 35.8033, lon: -78.7218 },
            { name: "Chicago Blackhawks", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/chi.png", lat: 41.8807, lon: -87.6742 },
            { name: "Colorado Avalanche", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/col.png", lat: 39.7487, lon: -105.0076 },
            { name: "Columbus Blue Jackets", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/cbj.png", lat: 39.9693, lon: -83.0061 },
            { name: "Dallas Stars", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/dal.png", lat: 32.7905, lon: -96.8103 },
            { name: "Detroit Red Wings", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/det.png", lat: 42.3411, lon: -83.0553 },
            { name: "Edmonton Oilers", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/edm.png", lat: 53.5469, lon: -113.4975 },
            { name: "Florida Panthers", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/fla.png", lat: 26.1585, lon: -80.3255 },
            { name: "Los Angeles Kings", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/la.png", lat: 34.0430, lon: -118.2673 },
            { name: "Minnesota Wild", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/min.png", lat: 44.9448, lon: -93.1011 },
            { name: "Montreal Canadiens", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/mtl.png", lat: 45.4961, lon: -73.5693 },
            { name: "Nashville Predators", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/nsh.png", lat: 36.1592, lon: -86.7785 },
            { name: "New Jersey Devils", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/nj.png", lat: 40.7336, lon: -74.1711 },
            { name: "New York Islanders", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/nyi.png", lat: 40.7144, lon: -73.7258 },
            { name: "New York Rangers", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/nyr.png", lat: 40.7505, lon: -73.9934 },
            { name: "Ottawa Senators", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/ott.png", lat: 45.2969, lon: -75.9268 },
            { name: "Philadelphia Flyers", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/phi.png", lat: 39.9012, lon: -75.1720 },
            { name: "Pittsburgh Penguins", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/pit.png", lat: 40.4396, lon: -79.9893 },
            { name: "San Jose Sharks", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/sj.png", lat: 37.3328, lon: -121.9012 },
            { name: "Seattle Kraken", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/sea.png", lat: 47.6219, lon: -122.3517 },
            { name: "St. Louis Blues", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/stl.png", lat: 38.6268, lon: -90.2026 },
            { name: "Tampa Bay Lightning", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/tb.png", lat: 27.9427, lon: -82.4518 },
            { name: "Toronto Maple Leafs", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/tor.png", lat: 43.6435, lon: -79.3791 },
            { name: "Utah Hockey Club", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/utah.png", lat: 40.7683, lon: -111.9011 },
            { name: "Vancouver Canucks", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/van.png", lat: 49.2778, lon: -123.1088 },
            { name: "Vegas Golden Knights", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/vgk.png", lat: 36.1029, lon: -115.1782 },
            { name: "Washington Capitals", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/wsh.png", lat: 38.8982, lon: -77.0209 },
            { name: "Winnipeg Jets", league: "NHL", logo: "https://a.espncdn.com/i/teamlogos/nhl/500/wpg.png", lat: 49.8926, lon: -97.1437 }
        ];

        let activeMarkers = [];
        let currentFilter = 'all'; 

        function initMap() {
            // Center map on USA
            map = L.map('map').setView([39.8283, -98.5795], 4); 

            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://carto.com/attributions">CARTO</a>',
                subdomains: 'abcd',
                maxZoom: 19
            }).addTo(map);

            renderMarkers();
        }

        function renderMarkers() {
            // Clear existing markers
            activeMarkers.forEach(marker => marker.remove());
            activeMarkers = [];

            const filteredTeams = TEAM_DATA.filter(team => {
                return currentFilter === 'all' || team.league === currentFilter;
            });

            filteredTeams.forEach(team => {
                const customIcon = L.icon({
                    iconUrl: team.logo,
                    iconSize: [35, 35], 
                    iconAnchor: [17, 17], 
                    popupAnchor: [0, -20]
                });

                const marker = L.marker([team.lat, team.lon], { icon: customIcon }).addTo(map);
                marker.bindPopup(`
                    <div class="text-center">
                        <img src="${team.logo}" class="w-10 h-10 mx-auto mb-2">
                        <b class="text-sm font-black uppercase text-white">${team.name}</b><br>
                        <span class="text-xs text-blue-400 font-bold">${team.league}</span>
                    </div>
                `);
                activeMarkers.push(marker);
            });
        }

        function zoomToAll() {
            if (activeMarkers.length > 0) {
                const group = new L.featureGroup(activeMarkers);
                map.fitBounds(group.getBounds().pad(0.1));
            } else {
                map.setView([39.8283, -98.5795], 4);
            }
        }

        function toggleLeagueFilter() {
            const leagues = ['all', 'NFL', 'NBA', 'MLB', 'NHL'];
            let currentIndex = leagues.indexOf(currentFilter);
            currentFilter = leagues[(currentIndex + 1) % leagues.length];
            
            document.getElementById('filterButton').textContent = `Filter: ${currentFilter.toUpperCase()}`;
            
            renderMarkers();
            zoomToAll(); 
        }

        initMap();
        zoomToAll(); 
    </script>
</body>
</html>
